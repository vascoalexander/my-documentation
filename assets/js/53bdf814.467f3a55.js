"use strict";(self.webpackChunkmy_documentation=self.webpackChunkmy_documentation||[]).push([[6652],{5611:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>u,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>b});const i=JSON.parse('{"id":"DB/ProjectDB/projektdb05-subqueries2","title":"Sub-Queries II","description":"","source":"@site/docs/06-DB/04-ProjectDB/projektdb05-subqueries2.md","sourceDirName":"06-DB/04-ProjectDB","slug":"/DB/ProjectDB/projektdb05-subqueries2","permalink":"/my-documentation/docs/DB/ProjectDB/projektdb05-subqueries2","draft":false,"unlisted":false,"editUrl":"https://github.com/vascoalexander/my-documentation/tree/main/docs/06-DB/04-ProjectDB/projektdb05-subqueries2.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"description":"","draft":false,"title":"Sub-Queries II"},"sidebar":"dbSidebar","previous":{"title":"Sub-Queries I","permalink":"/my-documentation/docs/DB/ProjectDB/projektdb05-subqueries1"},"next":{"title":"Sub-Queries III","permalink":"/my-documentation/docs/DB/ProjectDB/projektdb05-subqueries3"}}');var r=t(4848),a=t(8453);const o={sidebar_position:10,description:"",draft:!1,title:"Sub-Queries II"},u=void 0,s={},b=[];function d(e){const n={code:"code",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Nutzen Sie die Datenbank ProjektDB, \n-- um die folgenden Aufgaben zu l\xf6sen:\n\n\n-- =========================\n-- Korrelierte Unterabfragen\n-- =========================\n\n-- Aufgabe 5.9\n--\n-- Geben Sie eine Liste der Projekt-Ids und Aufgaben aus und \n-- nennen Sie dazu den Namen des Mitarbeiters. Soertieren Sie\n-- die Ausgabe nach Projekt-Id und Aufgabe. Nutzen Sie eine\n-- korrelierte Unterabnfrage im SELECT.\n--\n--      pro_id  aufgabe         nachname\n--      p1      NULL            Kr\xfcger\n--      p1      NULL            Mozer\n--      p1      Gruppenleiter   Meier\n--      p1      Projektleiter   Huber\n--      p1      Sachbearbeiter  Probst\n--      p2      NULL            Probst\n\nSELECT TOP 6 pro_id, aufgabe, (\n\tSELECT nachname FROM Mitarbeiter \n\tWHERE Arbeit.mit_id = Mitarbeiter.id) as nachname\nFROM Arbeit\nORDER BY pro_id, aufgabe\n\n-- Aufgabe 5.10\n--\n-- Erweitern Sie die Abfrage aus Aufgabe 5.9 und geben Sie\n-- zus\xe4tzlich auch den Projektnamen aus. Nutzen Sie zwei\n-- korrelierte Unterabfragen im SELECT.\n--\n--      pro_id  bezeichnung  aufgabe         nachname\n--      p1      Apollo       NULL            Kr\xfcger\n--      p1      Apollo       NULL            Mozer\n--      p1      Apollo       Gruppenleiter   Meier\n--      p1      Apollo       Projektleiter   Huber\n--      p1      Apollo       Sachbearbeiter  Probst\n--      p2      Gemini       NULL            Probst\n\nSELECT TOP 6 pro_id, aufgabe, (\n\tSELECT nachname FROM Mitarbeiter \n\tWHERE Arbeit.mit_id = Mitarbeiter.id) as nachname, \n\t(SELECT bezeichnung FROM Projekt WHERE Arbeit.pro_id = Projekt.id) as bezeichnung\nFROM Arbeit\nORDER BY pro_id, aufgabe\n\n-- Aufgabe 5.11\n--\n-- Geben Sie eine Liste aller Abteilngsnamen aus. Geben \n-- Sie dazu aus, wie viele Mitarbeiter in der Abteilung \n-- arbeiten. Nutzen Sie eine korrelierte Unterabfrage \n-- im SELECT.\n--\n--      bezeichnung  anzahl\n--      Beratung     2\n--      Diagnose     3\n--      Freigabe     3\n--      Einkauf      4\n--      Verkauf      3\n\nSELECT DISTINCT bezeichnung, (\n\tSELECT COUNT(id) FROM Mitarbeiter \n\tWHERE Abteilung.id = Mitarbeiter.abt_id) as anzahl\nFROM Abteilung;\n\n-- Aufgabe 5.12\n--\n-- Geben Sie eine Liste aller Mitarbeiter-Ids mit Gehalt aus.\n-- Geben Sie dazu auch den Namen des Mitarbeiters aus. Nutzen\n-- Sie eine korrelierte Unterabfrage im SELECT.\n--\n--      mit_id  nachname  gehalt\n--      2581    Kaufmann  3000,00\n--      5765    Sch\xe4fer   4500,00\n--      9031    Meier     4000,00\n--      9912    Wolf      3500,00\n--      10102   Huber     3500,00\n--      12121   Richter   3000,00\n\nSELECT TOP 6 id as mit_id, nachname, (\n\tSELECT gehalt FROM Gehalt WHERE m.id = mit_id) as gehalt\nFROM Mitarbeiter m\n\n-- Aufgabe 5.13\n--\n-- Erweitern Sie die Abfrage aus Aufgabe 5.12 und geben\n-- Sie zus\xe4tzlich noch das Durschnitts-Gehalt aller \n-- Mitarbeiter aus. Zeigen Sie anschlie\xdfend noch die\n-- Differenz des Mitarbeiters zum Durchschnitt an.\n--\n--      mit_id  nachname  gehalt   durchschnitt  differenz\n--      2581    Kaufmann  3000,00  3633,3333     -633,3333\n--      5765    Sch\xe4fer   4500,00  3633,3333     866,6667\n--      9031    Meier     4000,00  3633,3333     366,6667\n--      9912    Wolf      3500,00  3633,3333     -133,3333\n--      10102   Huber     3500,00  3633,3333     -133,3333\n--      12121   Richter   3000,00  3633,3333     -633,3333\n\nSELECT TOP 6 mit_id, (SELECT nachname FROM Mitarbeiter WHERE id = Gehalt.mit_id), gehalt, \n\t(SELECT AVG(gehalt) FROM Gehalt) as durchschnitt,\n\tgehalt - (SELECT AVG(gehalt) FROM Gehalt) as differenz\nFROM Gehalt\n\n-- Aufgabe 5.14\n--\n-- Zeigen Sie die Mitarbeiternamen und Abteilungsnamen der \n-- Mitarbeiter an, die im Projekt \"Apollo\" arbeiten. Nutzen \n-- Sie zwei verschachtelte Unterabfragen und eine korrelierte\n-- Unterabfrage im SELECT.\n--\n--      nachname  abteilung\n--      Meier     Diagnose\n--      Huber     Freigabe\n--      Kr\xfcger    Verkauf\n--      Mozer     Beratung\n--      Probst    Diagnose\n\nSELECT * FROM Projekt\n\nSELECT nachname, (SELECT bezeichnung FROM Abteilung WHERE Mitarbeiter.abt_id = id) as abteilung\nFROM Mitarbeiter\nWHERE id IN (\n\tSELECT mit_id FROM Arbeit \n\tWHERE pro_id = (\n\t\tSELECT id FROM Projekt \n\t\tWHERE bezeichnung = 'Apollo')\n\t);\n"})})}function c(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>u});var i=t(6540);const r={},a=i.createContext(r);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function u(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);