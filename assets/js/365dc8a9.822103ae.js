"use strict";(self.webpackChunkmy_documentation=self.webpackChunkmy_documentation||[]).push([[5276],{70947:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"DB/ProjectDB/projektdb09-case","title":"CASE","description":"","source":"@site/docs/06-DB/04-ProjectDB/projektdb09-case.md","sourceDirName":"06-DB/04-ProjectDB","slug":"/DB/ProjectDB/projektdb09-case","permalink":"/my-documentation/docs/DB/ProjectDB/projektdb09-case","draft":false,"unlisted":false,"editUrl":"https://github.com/vascoalexander/my-documentation/tree/main/docs/06-DB/04-ProjectDB/projektdb09-case.md","tags":[],"version":"current","sidebarPosition":17,"frontMatter":{"sidebar_position":17,"description":"","draft":false,"title":"CASE"},"sidebar":"dbSidebar","previous":{"title":"OUTER JOIN II","permalink":"/my-documentation/docs/DB/ProjectDB/projektdb08-outerjoin2"},"next":{"title":"FUNKTIONEN","permalink":"/my-documentation/docs/DB/ProjectDB/projektdb09-funktionen"}}');var i=t(74848),r=t(28453);const o={sidebar_position:17,description:"",draft:!1,title:"CASE"},s=void 0,d={},c=[];function u(e){const n={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- Nutzen Sie die Datenbank ProjektDB, \n-- um die folgenden Aufgaben zu l\xf6sen:\nUSE ProjektDB;\nSET LANGUAGE german;\n\n-- ==============\n-- CASE-Ausdr\xfccke\n-- ==============\n\n-- Aufgabe 9.1\n--\n-- Geben Sie eine Liste aller Projekte aus, in der \n-- Sie diese nach den verf\xfcgbaren Mitteln in \n-- Kategorien einteilen:\n--  weniger als  90.000 => Kategorie 1\n--  weniger als 135.000 => Kategorie 2\n--  weniger als 170.000 => Kategorie 3\n--  ab 170.000          => Kategorie 4\n--\n--      bezeichnung  kategorie\n--      Apollo       2\n--      Gemini       2\n--      Merkur       4\n--      Pluto        1\n--      Ariane       3\n\nSELECT bezeichnung, \n\tCASE WHEN mittel < 90000 THEN 1 \n\t\tWHEN mittel < 135000 THEN 2 \n\t\tWHEN mittel < 170000 THEN 3 \n\t\tELSE 4 END AS kategorie\nFROM Projekt;\n\n-- Aufgabe 9.2\n--\n-- Kategorisieren Sie Ihre Mitarbeiter. Mitarbeiter, \n-- die in der Abteilung 'Einkauf' arbeiten, kommen \n-- in Kategorie A. Mitarbeiter aus anderen Abteilungen \n-- kommen in Kategorie B. Aber wer in Landshut oder \n-- Rosenheim wohnt (also auf dem Land), der kommt auf \n-- jeden Fall in Kategorie F.\n--\n--      id     nachname  stadt       bezeichnung  kategorie\n--      2581   Kaufmann  NULL        Diagnose     B\n--      5765   Sch\xe4fer   Landshut    Freigabe     F\n--      9031   Meier     NULL        Diagnose     B\n--      9912   Wolf      Heidenheim  Einkauf      A\n--      10102  Huber     Landshut    Freigabe     F\n--      12121  Richter   M\xfcnchen     Einkauf      A\n--      ...\n--      (15 Zeilen)\n\nSELECT m.id, m.nachname, m.stadt, bezeichnung,\n\tCASE WHEN bezeichnung = 'Einkauf' THEN 'A'\n\t\tWHEN m.stadt IN ('Landshut', 'Rosenheim') THEN 'F'\n\t\tELSE 'B' END AS  kategorie\nFROM Mitarbeiter m\nJOIN Abteilung a ON m.abt_id = a.id;\n\n-- Aufgabe 9.3\n--\n-- Erweitern Sie die Abfrage aus Aufgabe 9.2. Mitarbeiter \n-- aus der Kategorie b sollen noch feiner unterteilt werden: \n-- Wenn Sie an einem Projekt mit mehr als 100.000 Mitteln \n-- arbeiten, sollen sie in Kategorie B1 fallen, sonst in \n-- Kategorie B2.\n--\n--      id     nachname  stadt       bezeichnung  kategorie\n--      2581   Kaufmann  NULL        Diagnose     B1\n--      5765   Sch\xe4fer   Landshut    Freigabe     F\n--      9031   Meier     NULL        Diagnose     B1\n--      9912   Wolf      Heidenheim  Einkauf      A\n--      10102  Huber     Landshut    Freigabe     F\n--      12121  Richter   M\xfcnchen     Einkauf      A\n--      ...\n--      (15 Zeilen)\n\nSELECT DISTINCT m.id, m.nachname, m.stadt, a.bezeichnung,\n\tCASE WHEN a.bezeichnung = 'Einkauf' THEN 'A'\n\t\tWHEN m.stadt IN ('Landshut', 'Rosenheim') THEN 'F'\n\t\tWHEN m.id IN (\n\t\t\tSELECT mit_id FROM Arbeit ab\n\t\t\tJOIN Projekt p ON ab.pro_id = p.id\n\t\t\tWHERE p.mittel > 100000) THEN 'B1'\n\t\tELSE 'B2'\n\tEND AS kategorie\nFROM Mitarbeiter m\nJOIN Abteilung a ON m.abt_id = a.id\n\n-- Aufgabe 9.4\n-- \n-- Kategorisieren Sie Arbeiter in Ihren Projekten. Wer am\n-- Wochenende in ein Projekt eingetreten ist, ist ein\n-- Arbeitstier, wer am Montag oder Dienstag angefangen hat \n-- ist fleissig, und der Rest ist ein Faulenzer. Benutzen\n-- Sie diesmal CASE.\n--\n--      einst_dat   wochentag   kategorie\n--      2019-10-15  Dienstag    Fleissig\n--      2018-07-20  Freitag     Faulenzer\n--      2019-04-15  Montag      Fleissig\n--      2018-11-15  Donnerstag  Faulenzer\n--      2019-01-17  Donnerstag  Faulenzer\n--      2018-10-01  Montag      Fleissig\n--      ...\n--      (20 Zeilen)\n\nSELECT a.einst_dat, DATENAME(dw, a.einst_dat) as wochentag,\n\tCASE WHEN DATENAME(dw, a.einst_dat) IN ('Samstag', 'Sontag') THEN 'Arbeitstier'\n\t\tWHEN DATENAME(dw, a.einst_dat) IN ('Montag', 'Dienstag') THEN 'Fleissig'\n\t\tELSE 'Faulenzer' END AS kategorie\nFROM Arbeit a\n\n\n-- Aufgabe 9.5\n--\n-- Generieren Sie Codes f\xfcr Ihre Mitarbeiter. Der Code soll\n-- bestehen aus:\n--      - Erster Buchstabe Nachname\n--      - Vierter Buchstabe Nachname (gro\xdf)\n--      - Letzter Buchstabe Vorname (gro\xdf)\n--      - Abteilungsnummer r\xfcckw\xe4rts (a1 => 1a)\n--\n--      nachname  vorname   abt_id  code\n--      Kaufmann  Brigitte  a2      KFE2a\n--      Sch\xe4fer   Sabine    a3      S\xc4E3a\n--      Meier     Rainer    a2      MER2a\n--      Wolf      Klaus     a4      WFS4a\n--      Huber     Petra     a3      HEA3a\n--      Richter   Ursula    a4      RHA4a\n\nSELECT nachname, vorname, abt_id,\n\tLEFT(nachname, 1) + UPPER(SUBSTRING(nachname, 4, 1) + UPPER(SUBSTRING(vorname, LEN(vorname), 1)))\n\t+ REVERSE(abt_id)\nFROM Mitarbeiter\n"})})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>s});var a=t(96540);const i={},r=a.createContext(i);function o(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);